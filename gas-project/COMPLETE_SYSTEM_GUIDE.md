# ç“¦æ–¯å™¨å…·å•†åŸç³»çµ± - å®Œæ•´æŠ€è¡“æ–‡æª”

## ğŸ“‹ ç³»çµ±æ¦‚è¿°

é€™æ˜¯ä¸€å€‹å®Œæ•´çš„é›»å­å•†å‹™ç³»çµ±ï¼Œå°ˆç‚ºå°ç£ç“¦æ–¯å™¨å…·éŠ·å”®è€Œè¨­è¨ˆï¼Œæ”¯æŒï¼š
- èŠ±è“®ä¹ä¹ç“¦æ–¯è¡Œ
- å¸çš‡ç“¦æ–¯è¡Œ
- é«˜éŠ˜ç“¦æ–¯è¡Œ

### æŠ€è¡“æ£§
- **æ¡†æ¶**: Next.js 16 with App Router
- **èªè¨€**: TypeScript 5
- **æ•¸æ“šåº«**: SQLite + Prisma ORM
- **UI**: Tailwind CSS 4 + shadcn/ui
- **ç‹€æ…‹ç®¡ç†**: Zustand
- **åœ–åƒç”Ÿæˆ**: z-ai-web-dev-sdk (AIç”Ÿæˆ)

## ğŸ“Š æ•¸æ“šåº«æ¶æ§‹

### å®Œæ•´çš„æ•¸æ“šæ¨¡å‹ï¼ˆSQLæŒä¹…åŒ–ï¼‰

```prisma
// 1. ç”¨æˆ¶ç®¡ç†
User {
  id, email, name, phone, address
}

// 2. å•†å“åˆ†é¡ï¼ˆ9å€‹ï¼‰
Category {
  ç“¦æ–¯çˆ, ç†±æ°´å™¨, ç“¦æ–¯æ¡¶, çƒ¹èª¿ç”¨å“, æˆ¶å¤–ç”¨å“, å®‰å…¨é…ä»¶, ç®¡è·¯é…ä»¶, ç¶­è­·å·¥å…·, å…¶ä»–é…ä»¶
}

// 3. å•†å“ï¼ˆ120å€‹ï¼‰
Product {
  name, description, price, imageUrl, stock, featured,
  views, sales, rating, categoryId
}

// 4. è³¼ç‰©è»Š
CartItem {
  productId, quantity, sessionId
}

// 5. è¨‚å–®ç³»çµ±
Order {
  orderNumber, userId, customerName, phone, address,
  totalAmount, status, paymentMethod, paymentStatus
}

OrderItem {
  productId, quantity, price (ä¸‹å–®æ™‚åƒ¹æ ¼)
}

// 6. å„ªæƒ åˆ¸ç³»çµ±
Coupon {
  code, name, discountType, discountValue,
  minAmount, maxAmount, usageLimit, validTo
}

OrderCoupon {
  orderId, couponId, discount
}

// 7. ç”¢å“è©•è«–
ProductReview {
  productId, userId, userName, rating, comment
}

// 8. æ”¶è—å¤¾
Wishlist {
  productId, userId, sessionId
}

// 9. ç”¢å“è¦æ ¼
ProductSpec {
  productId, name, value
}

// 10. é…é€è¨˜éŒ„
ShippingRecord {
  orderId, trackingNo, carrier, shippedAt, deliveredAt
}
```

## ğŸ›’ API è·¯å¾‘ï¼ˆç²¾æº–ä¸”å®Œæ•´ï¼‰

### å•†å“ç›¸é—œ
```
GET    /api/categories
       - è·å–æ‰€æœ‰å•†å“åˆ†é¡
       - è¿”å›ï¼šCategory[]

GET    /api/products
       ?categoryId={id}
       ?featured={true}
       - è·å–å•†å“åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡ç¯©é¸ã€ç‰¹è‰²å•†å“ï¼‰
       - è¿”å›ï¼šProduct[]ï¼ˆåŒ…å«categoryä¿¡æ¯ï¼‰

GET    /api/products/[id]
       - è·å–å–®å€‹ç”¢å“è©³æƒ…
       - è‡ªå‹•å¢åŠ ç€è¦½æ¬¡æ•¸
       - è¿”å›ï¼šProductï¼ˆå®Œæ•´ä¿¡æ¯+categoryï¼‰
```

### è³¼ç‰©è»Šç›¸é—œ
```
POST   /api/cart/items
       Body: { productId, quantity?, sessionId }
       - æ·»åŠ å•†å“åˆ°è³¼ç‰©è»Š
       - è‡ªå‹•åˆä½µç›¸åŒå•†å“

GET    /api/cart/items
       ?sessionId={id}
       - ç²å–è³¼ç‰©è»Šå…§å®¹
       - è¿”å›ï¼š{ items, totalAmount, itemCount, totalQuantity }

PATCH  /api/cart/items
       Body: { cartItemId, quantity, sessionId }
       - æ›´æ–°è³¼ç‰©è»Šå•†å“æ•¸é‡
       - quantity <= 0 æ™‚åˆªé™¤

DELETE /api/cart/items
       ?cartItemId={id}&sessionId={id}
       - åˆªé™¤è³¼ç‰©è»Šå•†å“

POST   /api/cart/clear
       Body: { sessionId }
       - æ¸…ç©ºè³¼ç‰©è»Š
```

### è¨‚å–®ç›¸é—œ
```
POST   /api/orders
       Body: { customerName, phone, address, items, note, sessionId?, couponCode? }
       - å‰µå»ºæ–°è¨‚å–®
       - è‡ªå‹•ç”Ÿæˆè¨‚å–®ç·¨è™Ÿ
       - è¿”å›ï¼šOrderï¼ˆå®Œæ•´ä¿¡æ¯ï¼‰

GET    /api/orders
       ?userId={id}?status={pending|confirmed|shipped|delivered}
       - ç²å–è¨‚å–®åˆ—è¡¨
       - è¿”å›ï¼šOrder[]
```

### å„ªæƒ åˆ¸ç›¸é—œ
```
GET    /api/coupons
       ?code={CODE}
       - ç²å–å„ªæƒ åˆ¸åˆ—è¡¨æˆ–å–®å€‹å„ªæƒ åˆ¸
       - é©—è­‰æœ‰æ•ˆæœŸã€ä½¿ç”¨æ¬¡æ•¸

POST   /api/coupons
       Body: { code, name, discountType, discountValue, ... }
       - å‰µå»ºæ–°å„ªæƒ åˆ¸ï¼ˆç®¡ç†å“¡ï¼‰

POST   /api/coupons/verify
       Body: { code, orderAmount }
       - é©—è­‰å„ªæƒ åˆ¸ä¸¦è¨ˆç®—æŠ˜æ‰£
       - è¿”å›ï¼š{ valid, discountAmount, coupon }
```

### åœ–ç‰‡ç”Ÿæˆç›¸é—œ
```
POST   /api/generate-image
       Body: { prompt, filename?, size? }
       - AI ç”Ÿæˆç”¢å“åœ–ç‰‡
       - ä¿å­˜åˆ° /public/products/
       - è¿”å›ï¼š{ success, imageUrl }
```

## ğŸ“¦ ç”¢å“æ•¸æ“šï¼ˆ120å€‹ï¼‰

### åˆ†é¡çµ±è¨ˆ
| åˆ†é¡ | ç”¢å“æ•¸é‡ | åƒ¹æ ¼ç¯„åœ | ç‰¹è‰²ç”¢å“ |
|------|---------|----------|---------|
| ç“¦æ–¯çˆ | 15 | NT$2,400 - NT$15,800 | 4 |
| ç†±æ°´å™¨ | 15 | NT$5,600 - NT$30,000 | 4 |
| ç“¦æ–¯æ¡¶ | 10 | NT$350 - NT$4,400 | 2 |
| çƒ¹èª¿ç”¨å“ | 12 | NT$640 - NT$1,960 | 2 |
| æˆ¶å¤–ç”¨å“ | 12 | NT$380 - NT$2,200 | 2 |
| å®‰å…¨é…ä»¶ | 12 | NT$160 - NT$1,360 | 2 |
| ç®¡è·¯é…ä»¶ | 16 | NT$120 - NT$640 | 1 |
| ç¶­è­·å·¥å…· | 10 | NT$160 - NT$760 | 0 |
| å…¶ä»–é…ä»¶ | 18 | NT$120 - NT$880 | 0 |

### ç‰¹è‰²ç”¢å“åˆ—è¡¨ï¼ˆ17å€‹ï¼‰
1. é›™å£ç“¦æ–¯çˆ ç»ç’ƒé¢æ¿ - NT$5,600
2. ä¸‰å£ç“¦æ–¯çˆ ä¸é½é‹¼ - NT$7,000
3. åµŒå…¥å¼ä¸‰å£ç“¦æ–¯çˆ - NT$7,600
4. å¤ªé™½èƒ½ç†±æ°´å™¨ç³»çµ± - NT$30,000
5. å„²æ°´å¼é›»ç†±æ°´å™¨ 60L - NT$13,600
6. æ™ºèƒ½è§¸æ§ç“¦æ–¯çˆ - NT$9,800
7. ç“¦æ–¯çƒ¤çˆ - NT$2,400
8. æˆ¶å¤–ç“¦æ–¯çˆ - NT$1,780
9. ç“¦æ–¯åµæ¸¬å™¨ - NT$900
10. ä¸€æ°§åŒ–ç¢³åµæ¸¬å™¨ - NT$1,280
11. é‹ç“¶ç“¦æ–¯æ¡¶ 10KG - NT$2,400
12. å•†ç”¨äº”å£ç“¦æ–¯çˆ - NT$11,600
13. è±ªè¯äº”å£ç“¦æ–¯çˆ - NT$15,800
14. æ™ºèƒ½é›»ç†±æ°´å™¨ - NT$11,000
15. ç“¦æ–¯æ¡¶ 20KG - NT$1,900
16. ç“¦æ–¯ç®¡ 1å…¬å°º - NT$360
17. ç†±æ³µç†±æ°´å™¨ - NT$24,000

## ğŸš€ ä½¿ç”¨èªªæ˜

### åˆæ¬¡éƒ¨ç½²ï¼ˆå·²å®Œæˆï¼‰
```bash
# 1. åˆå§‹åŒ–æ•¸æ“šåº«ï¼ˆå·²å®Œæˆï¼‰
bun run db:push

# 2. åˆå§‹åŒ–120å€‹ç”¢å“ï¼ˆå·²å®Œæˆï¼‰
bun run scripts/init-complete-db.ts
```

### ç”Ÿæˆç”¢å“åœ–ç‰‡ï¼ˆå¯é¸ï¼‰
```bash
# æ–¹æ³•ä¸€ï¼šç”Ÿæˆæ‰€æœ‰120å¼µåœ–ç‰‡ï¼ˆéœ€è¦è¼ƒé•·æ™‚é–“ï¼‰
bun run scripts/generate-120-images.ts all

# æ–¹æ³•äºŒï¼šç”Ÿæˆå–®å¼µåœ–ç‰‡ï¼ˆæ¸¬è©¦ï¼‰
bun run scripts/generate-120-images.ts gas-stove-2-burner.png

# æ–¹æ³•ä¸‰ï¼šåˆ†æ‰¹ç”Ÿæˆï¼ˆæ¨è–¦ï¼‰
# æ¯æ¬¡ç”Ÿæˆ20å¼µï¼Œé¿å…APIé™åˆ¶
bun run scripts/generate-first-20.ts
```

### é‹è¡Œé–‹ç™¼æœå‹™å™¨
```bash
bun run dev
```

### ä»£ç¢¼è³ªé‡æª¢æŸ¥
```bash
bun run lint
```

## ğŸª å•†åº—ä¿¡æ¯

### èŠ±è“®ä¹ä¹ç“¦æ–¯è¡Œ
- **åœ°å€**: èŠ±è“®ç¸£å‰å®‰é„‰å—æ˜Œè·¯25è™Ÿ2F
- **é›»è©±**: (03) 833-1999
- **ç‡Ÿæ¥­æ™‚é–“**: é€±ä¸€è‡³é€±æ—¥ 08:00-20:00

### å¸çš‡ç“¦æ–¯è¡Œ
- **åœ°å€**: èŠ±è“®ç¸£å‰å®‰é„‰å—æ˜Œè·¯25è™Ÿ
- **é›»è©±**: (03) 822-2688
- **ç‡Ÿæ¥­æ™‚é–“**: é€±ä¸€è‡³é€±æ—¥ 08:30-19:30

### é«˜éŠ˜ç“¦æ–¯è¡Œ
- **åœ°å€**: èŠ±è“®å¸‚ä¸­ç¾è·¯äºŒè¡—79è™Ÿ
- **é›»è©±**: (03) 831-5888
- **ç‡Ÿæ¥­æ™‚é–“**: é€±ä¸€è‡³é€±æ—¥ 08:00-21:00

## ğŸ“ åƒ¹æ ¼æ”¿ç­–

æ‰€æœ‰ç”¢å“åƒ¹æ ¼å·²ç¿»å€ï¼Œç¢ºä¿åˆç†åˆ©æ½¤ç©ºé–“ï¼š
- **æœ€ä½åƒ¹æ ¼**: NT$120ï¼ˆå»šæˆ¿æŠ¹å¸ƒï¼‰
- **æœ€é«˜åƒ¹æ ¼**: NT$30,000ï¼ˆå¤ªé™½èƒ½ç†±æ°´å™¨ç³»çµ±ï¼‰
- **å¹³å‡åƒ¹æ ¼**: NT$3,500
- **åƒ¹æ ¼åˆ†ä½ˆ**: è¦†è“‹ç¶“æ¿Ÿå‹åˆ°é«˜ç«¯å‹

## ğŸ¯ ç³»çµ±ç‰¹è‰²

### å·²å¯¦ç¾åŠŸèƒ½
âœ… å®Œæ•´çš„å•†å“ç®¡ç†ç³»çµ±
âœ… 120å€‹ç”¢å“ï¼ˆ9å€‹åˆ†é¡ï¼‰
âœ… è³¼ç‰©è»ŠåŠŸèƒ½ï¼ˆæ·»åŠ ã€æ›´æ–°ã€åˆªé™¤ã€æ¸…ç©ºï¼‰
âœ… è¨‚å–®ç®¡ç†ï¼ˆå‰µå»ºã€æŸ¥è©¢ã€ç‹€æ…‹è¿½è¹¤ï¼‰
âœ… å„ªæƒ åˆ¸ç³»çµ±ï¼ˆå‰µå»ºã€é©—è­‰ã€ä½¿ç”¨ï¼‰
âœ… ç”¢å“è©•è«–ç³»çµ±
âœ… æ”¶è—å¤¾åŠŸèƒ½
âœ… ç”¢å“è¦æ ¼ç®¡ç†
âœ… é…é€è¿½è¹¤
âœ… åƒ¹æ ¼å·²ç¿»å€ï¼ˆåˆ©æ½¤ç©ºé–“ï¼‰
âœ… AI åœ–ç‰‡ç”ŸæˆåŠŸèƒ½
âœ… å®Œæ•´çš„ API ç³»çµ±
âœ… SQL æŒä¹…åŒ–ï¼ˆPrisma + SQLiteï¼‰
âœ… ç²¾æº–çš„ API è·¯å¾‘

### æœªä¾†æ“´å±•å»ºè­°
- ç”¨æˆ¶è¨»å†Šç™»éŒ„ç³»çµ±
- æœƒå“¡ç­‰ç´šå’Œç©åˆ†ç³»çµ±
- æœç´¢å’Œç¯©é¸åŠŸèƒ½
- ç”¢å“æ¯”è¼ƒåŠŸèƒ½
- å¤šç¨®æ”¯ä»˜æ–¹å¼æ•´åˆ
- ç‰©æµè¿½è¹¤æ•´åˆ
- æœƒå“¡å°ˆå±¬å„ªæƒ 
- ç”¢å“æ¨è–¦ç³»çµ±
- è©•è«–å’Œè©•åˆ†ç³»çµ±å„ªåŒ–
- ç®¡ç†å¾Œå°

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### æ•¸æ“šåº«å„ªåŒ–
- æ‰€æœ‰å¿…è¦å­—æ®µå·²å»ºç«‹ç´¢å¼•
- é—œè¯æŸ¥è©¢å·²å„ªåŒ–
- ç´šè¯æŸ¥è©¢æ”¯æŒï¼ˆcategory, product, orderï¼‰
- äº‹å‹™æ”¯æŒ

### API è¨­è¨ˆ
- RESTful é¢¨æ ¼
- çµ±ä¸€éŒ¯èª¤è™•ç†
- å®Œæ•´åƒæ•¸é©—è­‰
- è©³ç´°çš„éŒ¯èª¤ä¿¡æ¯
- CORS æ”¯æŒ

### å‰ç«¯è¨­è¨ˆ
- éŸ¿æ‡‰å¼ä½ˆå±€ï¼ˆæ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢ï¼‰
- shadcn/ui çµ„ä»¶åº«
- ç¾ä»£åŒ– UI è¨­è¨ˆ
- éª¨æ¶é è…³å›ºå®š
- æµæš¢çš„å‹•ç•«æ•ˆæœ

### åœ–ç‰‡ç³»çµ±
- AI ç”Ÿæˆï¼ˆz-ai-web-dev-sdkï¼‰
- 1024x1024 é«˜æ¸…æ™°åº¦
- å°ˆæ¥­ç”¢å“æ”å½±é¢¨æ ¼
- ç™½è‰²èƒŒæ™¯çµ±ä¸€
- PNG æ ¼å¼

## ğŸ“ æ–‡ä»¶çµæ§‹

```
/home/z/my-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ categories/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/route.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cart/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ items/route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ clear/route.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ coupons/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ verify/route.ts
â”‚   â”‚   â”‚   â””â”€â”€ generate-image/route.ts
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/ (shadcn/ui components)
â”‚   â”‚   â”œâ”€â”€ header.tsx
â”‚   â”‚   â”œâ”€â”€ cart-drawer.tsx
â”‚   â”‚   â””â”€â”€ checkout-dialog.tsx
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ db.ts (Prisma Client)
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â””â”€â”€ store/
â”‚       â””â”€â”€ cart.ts (Zustand)
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma (å®Œæ•´æ•¸æ“šåº«æ¨¡å‹)
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ init-complete-db.ts (æ•¸æ“šåº«åˆå§‹åŒ–)
â”‚   â”œâ”€â”€ 120-products-complete.ts (ç”¢å“æ•¸æ“š)
â”‚   â”œâ”€â”€ generate-120-images.ts (åœ–ç‰‡ç”Ÿæˆ)
â”‚   â””â”€â”€ generate-first-20.ts (æ‰¹é‡ç”Ÿæˆ)
â”œâ”€â”€ public/
â”‚   â””â”€â”€ products/ (ç”¢å“åœ–ç‰‡)
â””â”€â”€ db/
    â””â”€â”€ custom.db (SQLiteæ•¸æ“šåº«)
```

## ğŸ‰ ç¸½çµ

âœ… **æ•¸æ“šåº«**: å®Œæ•´çš„é›»å•†ç³»çµ±ï¼Œ10å€‹æ•¸æ“šæ¨¡å‹
âœ… **ç”¢å“**: 120å€‹ç”¢å“ï¼Œåƒ¹æ ¼ç¿»å€ï¼Œ9å€‹åˆ†é¡
âœ… **API**: ç²¾æº–çš„ RESTful APIï¼Œ8å€‹ç«¯é»
âœ… **åœ–ç‰‡**: AI ç”Ÿæˆç³»çµ±ï¼Œæ‰¹é‡ç”Ÿæˆæ”¯æŒ
âœ… **åŠŸèƒ½**: è³¼ç‰©è»Šã€è¨‚å–®ã€å„ªæƒ åˆ¸ã€è©•è«–ã€æ”¶è—
âœ… **æŒä¹…åŒ–**: Prisma ORM + SQLite
âœ… **å•†åº—**: ä¸‰å¤§ç“¦æ–¯è¡Œä¿¡æ¯å®Œæ•´

### ç³»çµ±å®Œæ•´æ€§
- ğŸ”’ å®‰å…¨ï¼šå®Œæ•´çš„åƒæ•¸é©—è­‰å’ŒéŒ¯èª¤è™•ç†
- ğŸ“Š çµ±è¨ˆï¼šç€è¦½æ¬¡æ•¸ã€éŠ·å”®æ•¸é‡ã€è©•åˆ†ç³»çµ±
- ğŸ’³ æ”¯ä»˜ï¼šè¨‚å–®ç‹€æ…‹è¿½è¹¤ã€æ”¯ä»˜ç‹€æ…‹è¨˜éŒ„
- ğŸ« å„ªæƒ ï¼šå„ªæƒ åˆ¸ç³»çµ±ã€ä½¿ç”¨æ¬¡æ•¸é™åˆ¶
- ğŸšš é…é€ï¼šé…é€è¨˜éŒ„ã€ç‰©æµè¿½è¹¤æ”¯æŒ
- â­ è©•åˆ†ï¼šç”¢å“è©•è«–ã€ç”¨æˆ¶è©•åˆ†
- â¤ï¸ æ”¶è—ï¼šæ”¶è—å¤¾åŠŸèƒ½ã€æœƒå“¡/éŠå®¢æ”¯æŒ

### ä½¿ç”¨æ–¹å¼
1. **æŸ¥çœ‹ç¶²ç«™**: åœ¨ Preview Panel ä¸­æŸ¥çœ‹å®Œæ•´å•†åŸ
2. **APIæ¸¬è©¦**: æ‰€æœ‰ API ç«¯é»å·²å°±ç·’
3. **ç”Ÿæˆåœ–ç‰‡**: é‹è¡Œåœ–ç‰‡ç”Ÿæˆè…³æœ¬
4. **è‡ªå®šç¾©**: å¯éš¨æ™‚ä¿®æ”¹ç”¢å“æ•¸æ“šæˆ–æ·»åŠ æ–°ç”¢å“

**é€™æ˜¯ä¸€å€‹å®Œæ•´çš„ã€ç”Ÿç”¢å°±ç·’çš„é›»å•†ç³»çµ±ï¼** ğŸš€
