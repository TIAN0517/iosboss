# LINE Bot 選單與卡片按鈕說明

## 📱 Quick Reply 快速回應按鈕

### 問候/一般用户
| 按鈕 | 觸發文字 |
|------|----------|
| 🛒 訂瓦斯 | 「我要訂 20kg 瓦斯」 |
| 📦 查庫存 | 「查詢目前庫存」 |
| 💰 查價格 | 「瓦斯價格多少」 |
| ❓ 說明 | 「幫助說明」 |

### 幫助選單
| 按鈕 | 觸發文字 |
|------|----------|
| 🛒 訂瓦斯 | 「我要訂瓦斯」 |
| 📦 查庫存 | 「查庫存」 |
| 📋 查訂單 | 「查詢我的訂單」 |
| 📞 聯絡客服 | 「聯絡客服」 |

### 訂購規格
| 按鈕 | 觸發文字 |
|------|----------|
| 4kg | 「我要訂 4kg 瓦斯」 |
| 20kg | 「我要訂 20kg 瓦斯」 |
| 50kg | 「我要訂 50kg 瓦斯」 |

### 司機專用
| 按鈕 | 觸發文字 |
|------|----------|
| 📋 我的任務 | 「我的任務」 |
| ✅ 完成配送 | 「完成配送」 |
| 📞 聯絡公司 | 「聯絡公司」 |

### 管理員專用
| 按鈕 | 觸發文字 |
|------|----------|
| 📊 今日報表 | 「今日報表」 |
| 📦 庫存狀態 | 「查庫存」 |
| 💰 營收統計 | 「營收統計」 |
| 👥 業務報表 | 「業務報表」 |

---

## 🎨 Flex Message 卡片模板

### 1. 訂單確認卡片 (orderConfirm)
- **標題**：🛒 訂單確認
- **背景色**：綠色 (#10b981)
- **顯示內容**：
  - 客戶名稱
  - 商品規格
  - 數量
  - 金額
  - 預計配送時間
- **按鈕**：
  - 「確認訂單」 → 發送「確認訂單」
  - 「修改訂單」 → 發送「修改訂單」

### 2. 庫存查詢卡片 (inventory)
- **類型**：Carousel 輪播
- **每頁顯示**：單一商品庫存
- **顯示內容**：
  - 商品名稱
  - 庫存數量
  - 狀態（充足/不足）
- **狀態顏色**：
  - 充足：綠色 (#d1fae5)
  - 不足：黃色 (#fef3c7)

### 3. 司機任務卡片 (driverTasks)
- **類型**：Carousel 輪播 (最多10筆)
- **標題**：📋 任務 X
- **背景色**：藍色 (#3b82f6)
- **顯示內容**：
  - 客戶名稱
  - 地址
  - 商品項目
  - 電話
- **按鈕**：
  - 「聯絡客戶」 → 發送「聯絡 [電話]」
  - 「完成配送」 → 發送「完成任務 [任務ID]」

### 4. 管理報表卡片 (adminReport)
- **標題**：📊 今日營運報表
- **背景色**：紫色 (#8b5cf6)
- **顯示內容**：
  - 📦 訂單數
  - 💰 營業額
  - 📈 成長率
  - 👥 客戶數
  - ⏰ 更新時間

---

## 🎯 群組類型對應

| 群組類型 | 識別名稱 | 回應風格 |
|----------|----------|----------|
| ADMIN | 老闆娘、管理員 | 專業、完整數據 |
| DRIVER | 司機、配送員 | 任務導向 |
| SALES | 業務員 | 業績導向 |
| CUSTOMER_SERVICE | 客服 | 服務導向 |
| GENERAL | 一般客户 | 簡單易懂 |

---

## 📝 意圖識別關鍵字

### 訂單相關
- 「訂瓦斯」「下單」「買瓦斯」「送瓦斯」
- 「20kg」「4kg」「50kg」「一桶」

### 庫存相關
- 「庫存」「還有多少」「有沒有貨」「存貨」

### 價格相關
- 「多少錢」「價格」「費用」「多少」「多少錢」

### 查詢相關
- 「我的訂單」「訂單查詢」「訂單狀態」「送到哪」

### 幫助相關
- 「幫助」「說明」「怎麼用」「怎麼訂」

---

## 🔧 遷移後檢查清單

- [ ] Caddy 服務已啟動 (端口 443)
- [ ] Next.js 服務已啟動 (端口 9999)
- [ ] PostgreSQL 資料庫連線正常
- [ ] LINE Webhook URL 已更新 (`https://linebot.tiankai.it.com/api/webhook/line`)
- [ ] 環境變量已設置 (.env)
- [ ] Prisma 已執行 `db push`
- [ ] AI 服務已啟動 (端口 8888)
