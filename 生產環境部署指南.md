# ä¹ä¹ç“¦æ–¯è¡Œç®¡ç†ç³»çµ± - ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²æŒ‡å—

## ğŸ“‹ å‰ç½®æº–å‚™

### 1. å®‰è£ PM2ï¼ˆé€²ç¨‹ç®¡ç†å™¨ï¼‰

é›™æ“Šé‹è¡Œï¼š`install-pm2.bat`

æˆ–åœ¨çµ‚ç«¯åŸ·è¡Œï¼š
```bash
npm install -g pm2
```

---

## ğŸš€ å•Ÿå‹•æœå‹™

### æ–¹å¼ä¸€ï¼šä½¿ç”¨è…³æœ¬ï¼ˆæ¨è–¦ï¼‰

é›™æ“Šé‹è¡Œï¼š`start-prod.bat`

### æ–¹å¼äºŒï¼šæ‰‹å‹•å‘½ä»¤

```bash
# 1. æ§‹å»ºé …ç›®
bun run build

# 2. å•Ÿå‹•æœå‹™
pm2 start ecosystem.config.js

# 3. ä¿å­˜é…ç½®
pm2 save
```

---

## ğŸ“Š ç®¡ç†æœå‹™

### æŸ¥çœ‹ç‹€æ…‹
é›™æ“Šï¼š`status.bat`

æˆ–å‘½ä»¤ï¼š
```bash
pm2 status
```

### æŸ¥çœ‹æ—¥èªŒ
é›™æ“Šï¼š`logs.bat`

æˆ–å‘½ä»¤ï¼š
```bash
pm2 logs gas-station
```

### é‡å•Ÿæœå‹™
```bash
pm2 restart gas-station
```

### åœæ­¢æœå‹™
é›™æ“Šï¼š`stop-prod.bat`

æˆ–å‘½ä»¤ï¼š
```bash
pm2 stop gas-station
pm2 delete gas-station
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤ | èªªæ˜ |
|------|------|
| `pm2 list` | æŸ¥çœ‹æ‰€æœ‰é€²ç¨‹ |
| `pm2 status` | æŸ¥çœ‹ç‹€æ…‹ |
| `pm2 logs gas-station` | æŸ¥çœ‹æ—¥èªŒ |
| `pm2 logs gas-station --lines 100` | æŸ¥çœ‹æœ€è¿‘100è¡Œ |
| `pm2 restart gas-station` | é‡å•Ÿæœå‹™ |
| `pm2 stop gas-station` | åœæ­¢æœå‹™ |
| `pm2 delete gas-station` | åˆªé™¤æœå‹™ |
| `pm2 monit` | å¯¦æ™‚ç›£æ§ï¼ˆCPU/å…§å­˜ï¼‰ |
| `pm2 show gas-station` | è©³ç´°è³‡è¨Š |

---

## ğŸŒ è¨ªå•åœ°å€

- **æœ¬åœ°**ï¼š`http://localhost:9999`
- **å…§ç¶²**ï¼š`http://æ‚¨çš„é›»è…¦IP:9999`

---

## ğŸ“ æ—¥èªŒä½ç½®

æ‰€æœ‰æ—¥èªŒä¿å­˜åœ¨ `logs/` ç›®éŒ„ï¼š
- `logs/combined.log` - æ‰€æœ‰æ—¥èªŒ
- `logs/error.log` - éŒ¯èª¤æ—¥èªŒ
- `logs/out.log` - è¼¸å‡ºæ—¥èªŒ

---

## ğŸ›¡ï¸ é˜²æ­¢æ‰ç·šé…ç½®

ç³»çµ±å·²è‡ªå‹•é…ç½®ï¼š
- âœ… è‡ªå‹•é‡å•Ÿï¼ˆ`autorestart: true`ï¼‰
- âœ… æœ€å¤šé‡è©¦10æ¬¡ï¼ˆ`max_restarts: 10`ï¼‰
- âœ… å…§å­˜è¶…é™é‡å•Ÿï¼ˆ`max_memory_restart: '500M'`ï¼‰
- âœ… 10ç§’ç©©å®šæª¢æ¸¬ï¼ˆ`min_uptime: '10s'`ï¼‰

---

## ğŸ”„ é–‹æ©Ÿè‡ªå•Ÿï¼ˆå¯é¸ï¼‰

### Windowsï¼š
1. æŒ‰ `Win + R`
2. è¼¸å…¥ `shell:startup`
3. å°‡ `start-prod.bat` çš„å¿«æ·æ–¹å¼æ”¾å…¥é–‹å•Ÿçš„è³‡æ–™å¤¾

### Linux/WSLï¼š
```bash
pm2 startup
pm2 save
```

---

## â“ æ•…éšœæ’é™¤

### æœå‹™ç„¡æ³•å•Ÿå‹•
```bash
# æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒ
pm2 logs gas-station --err

# æª¢æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
netstat -ano | findstr :9999
```

### é‡æ–°æ§‹å»º
```bash
# åœæ­¢æœå‹™
pm2 stop gas-station

# åˆªé™¤èˆŠçš„æ§‹å»º
rmdir /s .next

# é‡æ–°æ§‹å»º
bun run build

# é‡æ–°å•Ÿå‹•
pm2 start ecosystem.config.js
```

### æŸ¥çœ‹è©³ç´°éŒ¯èª¤
```bash
pm2 show gas-station
```

---

## ğŸ“ æŠ€è¡“æ”¯æ´

- **é–‹ç™¼åœ˜éšŠ**ï¼šJyæŠ€è¡“åœ˜éšŠ
- **æŠ€è¡“ç¸½ç›£**ï¼šBossJy
- **ç³»çµ±ç‰ˆæœ¬**ï¼šv2.0.0 Pro

---

**ç¥æ‚¨ä½¿ç”¨é †åˆ©ï¼** ğŸ‰
