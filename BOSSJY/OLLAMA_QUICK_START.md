# å¿«é€Ÿåƒè€ƒ - Ollama å¸¸è¦‹å•é¡Œè§£ç­”

## â“ å¸¸è¦‹å•é¡Œå¿«é€Ÿå›ç­”

### Q1: Ollama å¯ä»¥åœ¨å…§ç¶²é‹è¡Œå—ï¼Ÿ

**A: âœ… æ˜¯çš„ï¼Œå®Œå…¨å¯ä»¥åœ¨å…§ç¶²é‹è¡Œï¼**

- 100% æœ¬åœ°é‹è¡Œï¼Œä¸éœ€è¦å¤–ç¶²
- é›¢ç·šç’°å¢ƒä¹Ÿå¯ä»¥ä½¿ç”¨ï¼ˆä¸‹è¼‰æ¨¡å‹å¾Œï¼‰
- é©åˆæ”¿åºœã€ä¼æ¥­ã€è»éšŠç­‰å…§ç¶²ç’°å¢ƒ

### Q2: Ollama å¯ä»¥ä¸‹è¼‰å—ï¼Ÿ

**A: âœ… æ˜¯çš„ï¼Œå®Œå…¨å¯ä¸‹è¼‰ï¼**

- å®˜æ–¹ç¶²ç«™ï¼šhttps://ollama.com
- æ”¯æŒ macOSã€Linuxã€Windows
- æ”¯æŒå¤šç¨®å®‰è£æ–¹å¼ï¼ˆè…³æœ¬ã€Homebrewã€Chocolateyã€Dockerï¼‰

### Q3: å„²å­˜æ¨¡å¼æ˜¯ä»€éº¼ï¼Ÿ

**A: æˆ‘å€‘ä½¿ç”¨ SQLite**

- **æ–‡ä»¶ä½ç½®ï¼š** `/home/z/my-project/db/custom.db`
- **å„ªé»ï¼š** è¼•é‡ã€å¿«é€Ÿã€ç„¡éœ€é¡å¤–æœå‹™
- **å·²ç¶“åœ¨ç”¨ï¼š** å°ˆæ¡ˆé»˜èªå°±æ˜¯ SQLite

### Q4: SQLite å¯ä»¥æ¸…ç©ºå—ï¼Ÿ

**A: âœ… æ˜¯çš„ï¼Œå¯ä»¥æ¸…ç©ºï¼**

**æ–¹æ³•ä¸€ï¼šåˆªé™¤æ–‡ä»¶ï¼ˆæœ€ç°¡å–®ï¼‰**
```bash
rm -f /home/z/my-project/db/custom.db
bun run db:push
```

**æ–¹æ³•äºŒï¼šSQL æ¸…ç©ºï¼ˆä¿ç•™è¡¨çµæ§‹ï¼‰**
```bash
sqlite3 /home/z/my-project/db/custom.db
> DELETE FROM Store;
> DELETE FROM PhoneNumberVerification;
> .quit
```

**æ–¹æ³•ä¸‰ï¼šPrisma Studioï¼ˆåœ–å½¢ç•Œé¢ï¼‰**
```bash
npx prisma studio
# åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹ï¼šhttp://localhost:5555
# åˆªé™¤æ‰€æœ‰è¨˜éŒ„
```

### Q5: å¦‚ä½•æ¥å…¥ Ollamaï¼Ÿ

**A: å°ˆæ¡ˆå·²ç¶“æº–å‚™å¥½äº†ï¼**

**ä¸‰å€‹æ­¥é©Ÿï¼š**

1. **å®‰è£ Ollama**
   ```bash
   curl -fsSL https://ollama.com/install.sh | sh
   ```

2. **ä¸‹è¼‰ä¸¦å•Ÿå‹•æ¨¡å‹**
   ```bash
   # ä¸‹è¼‰æ¨¡å‹ï¼ˆç´„ 4GBï¼‰
   ollama pull llama3.2:7b
   
   # å•Ÿå‹•æœå‹™
   ollama serve
   ```

3. **é…ç½®å°ˆæ¡ˆ**
   ```bash
   # ç·¨è¼¯ .env æ–‡ä»¶
   OLLAMA_BASE_URL=http://localhost:11434
   OLLAMA_MODEL=llama3.2:7b
   ```

**å°ˆæ¡ˆä¸­å·²ç¶“åŒ…å«äº†ï¼š**
- âœ… Ollama å®¢æˆ¶ç«¯ï¼š`/src/lib/ollama.ts`
- âœ… Ollama APIï¼š`/api/extract-from-web-ollama`
- âœ… å®Œæ•´æ–‡æª”ï¼š`/OLLAMA_GUIDE.md`

### Q6: é›²ç«¯ API å’Œ Ollama å¦‚ä½•é¸æ“‡ï¼Ÿ

**A: æ ¹æ“šå ´æ™¯é¸æ“‡**

| å ´æ™¯ | æ¨è–¦é¸æ“‡ | åŸå›  |
|------|----------|------|
| å…§ç¶²/æ”¿åºœ | Ollama | å®Œå…¨é›¢ç·šå¯ç”¨ |
| éš±ç§æ•æ„Ÿæ•¸æ“š | Ollama | æ•¸æ“šä¸å¤–å‚³ |
| é–‹ç™¼æ¸¬è©¦ | é›²ç«¯ API | å¿«é€Ÿæ–¹ä¾¿ |
| ç”Ÿç”¢ç’°å¢ƒ | Ollama | è‡ªä¸»æ§åˆ¶ã€ç©©å®š |
| ç¡¬é«”æœ‰é™ | é›²ç«¯ API | ä¸ä½”ç”¨æœ¬åœ°è³‡æº |
| éœ€è¦æœ€æ–°æ¨¡å‹ | é›²ç«¯ API | æŒçºŒæ›´æ–° |

---

## ğŸš€ ä¸€éµé–‹å§‹ï¼ˆæœ€å¿«æ–¹å¼ï¼‰

### macOS/Linux ç”¨æˆ¶ï¼š

```bash
# 1. å®‰è£ Ollama
curl -fsSL https://ollama.com/install.sh | sh

# 2. ä¸‹è¼‰æ¨¡å‹ï¼ˆæ¨è–¦ï¼‰
ollama pull llama3.2:7b

# 3. å•Ÿå‹•æœå‹™
ollama serve

# 4. é…ç½®å°ˆæ¡ˆï¼ˆå¦é–‹çµ‚ç«¯ï¼‰
cd /home/z/my-project
echo "OLLAMA_BASE_URL=http://localhost:11434" >> .env
echo "OLLAMA_MODEL=llama3.2:7b" >> .env

# 5. æ¸¬è©¦
bun run dev
```

### Windows ç”¨æˆ¶ï¼š

```powershell
# 1. å®‰è£ Ollamaï¼ˆPowerShell ç®¡ç†å“¡ï¼‰
iwr -useb https://ollama.com/install.ps1 | iex

# 2. ä¸‹è¼‰æ¨¡å‹
ollama pull llama3.2:7b

# 3. å•Ÿå‹•æœå‹™
ollama serve

# 4. é…ç½®å°ˆæ¡ˆï¼ˆä½¿ç”¨è¨˜äº‹æœ¬ç·¨è¼¯ .envï¼‰
# æ·»åŠ ï¼š
# OLLAMA_BASE_URL=http://localhost:11434
# OLLAMA_MODEL=llama3.2:7b

# 5. æ¸¬è©¦
bun run dev
```

---

## ğŸ“Š å¿«é€Ÿå°æ¯”

### ç³»çµ±éœ€æ±‚

| é …ç›® | é›²ç«¯ API | Ollama |
|------|----------|--------|
| **ç¶²è·¯** | éœ€è¦å…¬ç¶² | é›¢ç·šä¹Ÿå¯ |
| **ç¡¬é«”** | ç„¡è¦æ±‚ | éœ€è¦ RAMï¼ˆæ¨è–¦ 16GB+ï¼‰ |
| **å®‰è£** | ç„¡éœ€å®‰è£ | éœ€è¦å®‰è£ï¼ˆ1åˆ†é˜ï¼‰ |
| **ç©ºé–“** | ç„¡è¦æ±‚ | éœ€è¦ç£ç›¤ç©ºé–“ï¼ˆ5-50GBï¼‰ |
| **ç¶­è­·** | ç„¡éœ€ç¶­è­· | éœ€è¦æ›´æ–°æ¨¡å‹ |

### ä½¿ç”¨æˆæœ¬

| é …ç›® | é›²ç«¯ API | Ollama |
|------|----------|--------|
| **åˆå§‹æˆæœ¬** | $0 | $0 |
| **ä½¿ç”¨æˆæœ¬** | æŒ‰æ¬¡ä»˜è²» | å…è²» |
| **éš±ç§æˆæœ¬** | æ•¸æ“šä¸Šå‚³ | å®Œå…¨ç§æœ‰ |
| **ç¶²è·¯æˆæœ¬** | API è«‹æ±‚æµé‡ | æ¨¡å‹ä¸‹è¼‰ä¸€æ¬¡ |

---

## ğŸ”§ æ¨è–¦é…ç½®

### å…§ç¶²ç’°å¢ƒæ¨è–¦é…ç½®

```env
# .env

# Ollama é…ç½®
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:7b

# æ¨¡å‹åƒæ•¸
OLLAMA_TEMPERATURE=0.1
OLLAMA_MAX_TOKENS=2048
OLLAMA_CONTEXT_SIZE=8192
```

### å…¬ç¶²ç’°å¢ƒæ¨è–¦é…ç½®

```env
# .env

# å¯ä»¥åŒæ™‚é…ç½®å…©ç¨®æ–¹å¼
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2:7b

# é›²ç«¯ APIï¼ˆä½œç‚ºå‚™é¸ï¼‰
ZAI_API_KEY=your_api_key_here

# åˆ‡æ›è®Šé‡
USE_OLLAMA=true  # ä½¿ç”¨ Ollama
# USE_OLLAMA=false # ä½¿ç”¨é›²ç«¯ API
```

---

## ğŸ—„ï¸ è³‡æ–™åº«ç®¡ç†å‘½ä»¤

### æ¸…ç©ºè³‡æ–™åº«

```bash
# å®Œå…¨æ¸…ç©ºï¼ˆæœ€å¸¸ç”¨ï¼‰
rm -f db/custom.db && bun run db:push

# å‚™ä»½å¾Œæ¸…ç©º
cp db/custom.db db/custom.db.backup && rm -f db/custom.db && bun run db:push

# åªæ¸…ç©ºåº—å®¶
sqlite3 db/custom.db "DELETE FROM Store;"
```

### æŸ¥çœ‹è³‡æ–™åº«

```bash
# ä½¿ç”¨ Prisma Studio
npx prisma studio

# ä½¿ç”¨ sqlite3 å‘½ä»¤è¡Œ
sqlite3 db/custom.db
> .tables
> SELECT * FROM Store LIMIT 10;
```

### å‚™ä»½èˆ‡æ¢å¾©

```bash
# å‚™ä»½
cp db/custom.db db/custom.db.backup.$(date +%Y%m%d)

# æ¢å¾©
cp db/custom.db.backup.20250101 db/custom.db

# å°å‡ºç‚º SQL
sqlite3 db/custom.db .dump > backup.sql

# å¾ SQL æ¢å¾©
sqlite3 db/custom.db < backup.sql
```

---

## ğŸ¯ ä½¿ç”¨å»ºè­°

### é–‹ç™¼éšæ®µ

1. **ä½¿ç”¨é›²ç«¯ API** - å¿«é€Ÿé–‹ç™¼ï¼Œæ–¹ä¾¿èª¿è©¦
2. **ä¸é™åˆ¶è³‡æº** - ä½¿ç”¨å¤§æ¨¡å‹
3. **å¿«é€Ÿè¿­ä»£** - ä¸éœ€è¦ç­‰å¾…æœ¬åœ°æ¨¡å‹éŸ¿æ‡‰

### æ¸¬è©¦éšæ®µ

1. **æ¸¬è©¦å…©ç¨®æ–¹å¼** - å°æ¯”é›²ç«¯å’Œ Ollama çµæœ
2. **è©•ä¼°æ€§èƒ½** - æ¯”è¼ƒéŸ¿æ‡‰æ™‚é–“å’Œæº–ç¢ºåº¦
3. **è©•ä¼°æˆæœ¬** - è¨ˆç®—ä½¿ç”¨æˆæœ¬

### ç”Ÿç”¢éšæ®µ

1. **å„ªå…ˆä½¿ç”¨ Ollama** - é™ä½æˆæœ¬ï¼Œæé«˜éš±ç§
2. **é…ç½®ç›£æ§** - ç›£æ§ Ollama æœå‹™ç‹€æ…‹
3. **æº–å‚™å‚™é¸æ–¹æ¡ˆ** - Ollama æ•…éšœæ™‚å¯ä»¥åˆ‡æ›åˆ°é›²ç«¯ API

---

## ğŸ“š é€²ä¸€æ­¥é–±è®€

- **å®Œæ•´æŒ‡å—ï¼š** `/OLLAMA_GUIDE.md`
- **Ollama å®˜ç¶²ï¼š** https://ollama.com
- **å°ˆæ¡ˆæ–‡æª”ï¼š** `/ENHANCED_SYSTEM.md`

---

## ğŸ†˜ ç²å–å¹«åŠ©

### å¸¸è¦‹å•é¡Œ

- **Q: Ollama å•Ÿå‹•å¤±æ•—ï¼Ÿ**
  - A: æª¢æŸ¥ç«¯å£ 11434 æ˜¯å¦è¢«ä½”ç”¨ï¼š`lsof -i :11434`

- **Q: æ¨¡å‹ä¸‹è¼‰å¤±æ•—ï¼Ÿ**
  - A: æª¢æŸ¥ç¶²è·¯é€£æ¥å’Œç£ç›¤ç©ºé–“ï¼š`df -h`

- **Q: æå–çµæœä¸æº–ç¢ºï¼Ÿ**
  - A: å˜—è©¦æ›´å¤§çš„æ¨¡å‹æˆ–èª¿æ•´æº«åº¦åƒæ•¸

- **Q: å¦‚ä½•æ›´æ–° Ollamaï¼Ÿ**
  - A: `ollama --version` æŸ¥çœ‹ç‰ˆæœ¬ï¼Œé‡æ–°é‹è¡Œå®‰è£è…³æœ¬

---

**æº–å‚™é–‹å§‹ä½¿ç”¨ï¼** ğŸš€

æœ‰ä»»ä½•å•é¡Œæˆ–éœ€è¦é€²ä¸€æ­¥çš„å¹«åŠ©ï¼Œè«‹éš¨æ™‚å‘Šè¨´æˆ‘ï¼
