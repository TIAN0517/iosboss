@import "tailwindcss";
@import "tw-animate-css/dist/tw-animate.css";

/* 確保中文字體正確載入 */
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    /* 優先使用 Noto Sans TC，然後是系統中字體備選 */
    font-family: "Noto Sans TC", "Microsoft JhengHei", "微軟正黑體", -apple-system, BlinkMacSystemFont, "Segoe UI", "PMingLiU", sans-serif;
  }
  html {
    font-family: "Noto Sans TC", "Microsoft JhengHei", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }

  /* 強制所有元素使用正確字體 */
  * {
    font-family: inherit;
  }

  /* 特別處理中文內容 */
  [lang="zh-TW"],
  [lang="zh-CN"],
  [lang="zh"] {
    font-family: "Noto Sans TC", "Microsoft JhengHei", "微軟正黑體", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }
}

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-noto-sans-tc), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

:root {
  /* 基礎圓角 - 適合觸控 */
  --radius: 0.75rem;

  /* ========================================
     iOS 18 風格色彩系統 - 更精緻的層次
     ======================================== */

  /* 顏色系統 - 高對比度，適合中年婦女 */
  --background: oklch(0.99 0 0);
  --foreground: oklch(0.15 0 0);

  /* 主要按鈕 - iOS 系統藍色 */
  --primary: oklch(0.57 0.24 250);
  --primary-foreground: oklch(0.99 0 0);

  /* 次要按鈕 - iOS 次要藍色 */
  --secondary: oklch(0.96 0.01 250);
  --secondary-foreground: oklch(0.15 0 0);

  /* 卡片背景 - 純白帶微藍 */
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.15 0 0);

  /* 彈出視窗 */
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.15 0 0);

  /* 柔和背景 */
  --muted: oklch(0.97 0.005 250);
  --muted-foreground: oklch(0.50 0 0);

  /* 強調色 */
  --accent: oklch(0.94 0.01 250);
  --accent-foreground: oklch(0.15 0 0);

  /* 危險/刪除 - iOS 系統紅色 */
  --destructive: oklch(0.58 0.23 25);
  --destructive-foreground: oklch(0.99 0 0);

  /* 成功 - iOS 系統綠色 */
  --success: oklch(0.62 0.20 145);
  --success-foreground: oklch(0.99 0 0);

  /* 警告 - iOS 系統橙色 */
  --warning: oklch(0.65 0.18 60);
  --warning-foreground: oklch(0.15 0 0);

  /* 邊框和輸入框 */
  --border: oklch(0.90 0 0);
  --input: oklch(0.90 0 0);
  --ring: oklch(0.57 0.24 250);

  /* 圖表顏色 - iOS 系統色彩 */
  --chart-1: oklch(0.65 0.22 250);
  --chart-2: oklch(0.60 0.18 180);
  --chart-3: oklch(0.55 0.15 40);
  --chart-4: oklch(0.70 0.20 320);
  --chart-5: oklch(0.60 0.18 120);

  /* 側邊欄 */
  --sidebar: oklch(0.988 0 0);
  --sidebar-foreground: oklch(0.15 0 0);
  --sidebar-primary: oklch(0.57 0.24 250);
  --sidebar-primary-foreground: oklch(0.99 0 0);
  --sidebar-accent: oklch(0.95 0 0);
  --sidebar-accent-foreground: oklch(0.15 0 0);
  --sidebar-border: oklch(0.90 0 0);
  --sidebar-ring: oklch(0.57 0.24 250);

  /* ========================================
     iOS 18 陰影系統 - 多層次精緻陰影
     ======================================== */
  --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.04);
  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.08), 0 1px 2px -1px rgb(0 0 0 / 0.08);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.08), 0 2px 4px -2px rgb(0 0 0 / 0.08);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.08);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.08), 0 8px 10px -6px rgb(0 0 0 / 0.08);
  --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.20);

  /* iOS 內部陰影 */
  --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.04);

  /* ========================================
     iOS 18 渐變系統
     ======================================== */
  --gradient-primary: linear-gradient(135deg, oklch(0.57 0.24 250) 0%, oklch(0.55 0.22 280) 100%);
  --gradient-success: linear-gradient(135deg, oklch(0.62 0.20 145) 0%, oklch(0.60 0.18 170) 100%);
  --gradient-warning: linear-gradient(135deg, oklch(0.65 0.18 60) 0%, oklch(0.63 0.16 50) 100%);
  --gradient-destructive: linear-gradient(135deg, oklch(0.58 0.23 25) 0%, oklch(0.56 0.21 15) 100%);
  --gradient-brand: linear-gradient(135deg, oklch(0.68 0.18 40) 0%, oklch(0.58 0.23 25) 100%);
}

.dark {
  /* iOS 18 深色模式色彩系統 */
  --background: oklch(0.15 0 0);
  --foreground: oklch(0.98 0 0);
  --card: oklch(0.20 0 0);
  --card-foreground: oklch(0.98 0 0);
  --popover: oklch(0.20 0 0);
  --popover-foreground: oklch(0.98 0 0);
  --primary: oklch(0.67 0.24 250);
  --primary-foreground: oklch(0.15 0 0);
  --secondary: oklch(0.25 0.005 250);
  --secondary-foreground: oklch(0.98 0 0);
  --muted: oklch(0.25 0.005 250);
  --muted-foreground: oklch(0.65 0 0);
  --accent: oklch(0.25 0.005 250);
  --accent-foreground: oklch(0.98 0 0);
  --destructive: oklch(0.65 0.23 25);
  --destructive-foreground: oklch(0.99 0 0);
  --success: oklch(0.68 0.20 145);
  --success-foreground: oklch(0.15 0 0);
  --warning: oklch(0.70 0.18 60);
  --warning-foreground: oklch(0.15 0 0);
  --border: oklch(0.28 0 0);
  --input: oklch(0.28 0 0);
  --ring: oklch(0.67 0.24 250);
  --chart-1: oklch(0.65 0.22 250);
  --chart-2: oklch(0.60 0.18 180);
  --chart-3: oklch(0.55 0.15 40);
  --chart-4: oklch(0.70 0.20 320);
  --chart-5: oklch(0.60 0.18 120);
  --sidebar: oklch(0.20 0 0);
  --sidebar-foreground: oklch(0.98 0 0);
  --sidebar-primary: oklch(0.67 0.24 250);
  --sidebar-primary-foreground: oklch(0.98 0 0);
  --sidebar-accent: oklch(0.25 0.005 250);
  --sidebar-accent-foreground: oklch(0.98 0 0);
  --sidebar-border: oklch(0.28 0 0);
  --sidebar-ring: oklch(0.67 0.24 250);
}

/* ========================================
   iOS 安全區域支援 (Safe Area)
   ======================================== */
.ios-safe-area {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

.ios-safe-area-top {
  padding-top: env(safe-area-inset-top);
}

.ios-safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.ios-safe-area-left {
  padding-left: env(safe-area-inset-left);
}

.ios-safe-area-right {
  padding-right: env(safe-area-inset-right);
}

/* ========================================
   適合中年婦女的大字體系統 - 優化版
   ======================================== */

/* 基礎字體大小 - 比一般網站大 */
html {
  font-size: 19px; /* 基礎字體從18px增加到19px，提升可讀性 */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;

  /* 字體渲染優化 - 讓字體更清晰 */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  
  /* iOS 13+ 專用字體優化 - 針對 iPhone 13 及以上 */
  font-feature-settings:
    "kern" 1,      /* 字距調整 */
    "liga" 1,      /* 連字 */
    "calt" 1,      /* 上下文替代 */
    "ss01" 1,      /* 樣式集 1 */
    "ss02" 1;      /* 樣式集 2 */

  /* iOS 專用高品質字體渲染 */
  -webkit-text-stroke: 0.01em transparent;
  text-shadow: 0 0 0.01em rgba(0, 0, 0, 0.01);

  /* 防止字體模糊 */
  image-rendering: -webkit-optimize-contrast;
}

/* iOS Safari 特別優化 */
@supports (-webkit-touch-callout: none) {
  html {
    /* iOS 裝置使用更精細的字體平滑 */
    -webkit-font-smoothing: subpixel-antialiased;

    /* 提升字體清晰度（針對 Retina 顯示） */
    -webkit-text-stroke-width: 0;
    -webkit-text-stroke-color: transparent;

    /* 最佳字體渲染品質 */
    text-rendering: geometricPrecision;
  }
}

/* 針對更大屏幕調整 */
@media (min-width: 640px) {
  html {
    font-size: 19px;
  }
}

@media (min-width: 768px) {
  html {
    font-size: 20px;
  }
}

/* 字體大小系統 - 清晰易讀 */
.text-easy-title {
  font-size: 1.75rem; /* 31.5px - 標題 */
  font-weight: 700;
  line-height: 1.3;
  letter-spacing: -0.01em;
  /* iOS 13+ 中文字體優化 */
  -webkit-font-smoothing: antialiased;
  font-feature-settings: "kern" 1;
}

.text-easy-heading {
  font-size: 1.5rem; /* 27px - 標題 */
  font-weight: 700;
  line-height: 1.3;
  letter-spacing: -0.01em;
  /* iOS 13+ 中文字體優化 */
  -webkit-font-smoothing: antialiased;
  font-feature-settings: "kern" 1;
}

.text-easy-subheading {
  font-size: 1.25rem; /* 22.5px - 副標題 */
  font-weight: 600;
  line-height: 1.4;
  /* iOS 13+ 中文字體優化 */
  -webkit-font-smoothing: antialiased;
}

.text-easy-body-large {
  font-size: 1.2rem; /* 約22.8px - 大內文 */
  font-weight: 500;
  line-height: 1.8; /* 增加行高 */
  /* iOS 13+ 中文字體優化 */
  -webkit-font-smoothing: antialiased;
  letter-spacing: 0.02em; /* 增加字距 */
}

.text-easy-body {
  font-size: 1.05rem; /* 約20px - 內文，提升可讀性 */
  font-weight: 500;
  line-height: 1.75; /* 增加行高，讓中文更易讀 */
  /* iOS 13+ 中文字體優化 */
  -webkit-font-smoothing: antialiased;
  letter-spacing: 0.02em; /* 增加字距，提升清晰度 */
}

.text-easy-body-small {
  font-size: 0.9375rem; /* 16.875px - 小內文 */
  font-weight: 500;
  line-height: 1.5;
  /* iOS 13+ 中文字體優化 */
  -webkit-font-smoothing: antialiased;
  letter-spacing: 0.01em;
}

.text-easy-caption {
  font-size: 0.9rem; /* 約17.1px - 說明文字，提升可讀性 */
  font-weight: 500;
  line-height: 1.6; /* 增加行高 */
  /* iOS 13+ 中文字體優化 */
  -webkit-font-smoothing: antialiased;
  letter-spacing: 0.025em; /* 增加字距 */
}

/* iOS 13+ Retina 顯示器專用優化 */
@media screen and (-webkit-min-device-pixel-ratio: 2) and (min-resolution: 192dpi) {
  * {
    /* 高 DPI 顯示器的字體清晰度優化 */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* 標題文字加粗優化 */
  .text-easy-title,
  .text-easy-heading {
    -webkit-font-smoothing: subpixel-antialiased;
    font-weight: 800; /* 在 Retina 顯示器上使用更粗的字重 */
  }
}

/* iOS Safari 針對中文文字的特殊優化 */
body[lang*="zh"],
body {
  /* 中文最佳行高和字距 */
  line-height: 1.75;
  letter-spacing: 0.025em;

  /* 中文字體渲染優化 */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  font-feature-settings:
    "kern" 1,
    "liga" 1,
    "calt" 1,
    "palt" 1;  /* 比例字間距 */
  
  /* 提升文字對比度 */
  text-shadow: 0 0 0.3px rgba(0, 0, 0, 0.02);
}

/* iPhone 13 Pro Max 及更大屏幕的專門優化 */
@media (min-width: 390px) and (-webkit-min-device-pixel-ratio: 3) {
  html {
    font-size: 19px; /* 更大的基礎字體 */
  }

  body[lang*="zh"] {
    letter-spacing: 0.03em; /* 更大的字距 */
    line-height: 1.75; /* 更舒適的行高 */
  }

  .text-easy-title {
    letter-spacing: -0.005em; /* 減少標題的字距緊縮 */
  }

  .text-easy-body,
  .text-easy-body-large {
    letter-spacing: 0.02em; /* 正文稍大的字距 */
  }
}

/* ========================================
   觸控優化 - 大按鈕、大間距
   ======================================== */

/* 最小觸控目標尺寸 44x44px (iOS 建議) */
.touch-target {
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* 大按鈕樣式 - 適合中年婦女 */
.button-easy-touch {
  min-height: 52px; /* 更大的按鈕 */
  padding: 14px 24px;
  font-size: 1.125rem; /* 20.25px */
  font-weight: 600;
  border-radius: 12px;
  transition: all 0.2s ease;
}

.button-easy-touch:active {
  transform: scale(0.96);
  opacity: 0.9;
}

/* 大輸入框樣式 */
.input-easy-touch {
  min-height: 52px;
  padding: 14px 18px;
  font-size: 1.125rem; /* 20.25px */
  border-radius: 12px;
  border-width: 2px;
  /* iOS 字體清晰度優化 */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  letter-spacing: 0.01em;
}

.input-easy-touch::placeholder {
  font-size: 1rem;
  color: oklch(0.60 0 0);
  /* 佔位符文字優化 */
  -webkit-font-smoothing: antialiased;
  opacity: 0.7;
}

/* 大卡片間距 */
.card-easy-spacing {
  padding: 20px;
  gap: 16px;
  border-radius: 16px;
}

/* 列表項目 - 大觸控區域 */
.list-item-easy {
  min-height: 64px;
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 16px;
  border-bottom-width: 1px;
}

/* ========================================
   iOS Safari 特定優化
   ======================================== */

/* 防止雙擊縮放和長按選取 */
a, button, input, textarea, select {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* ========================================
   iOS 原生風格增強
   ======================================== */

/* iOS 風格的毛玻璃效果 */
.ios-glass {
  background: rgba(255, 255, 255, 0.72);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
}

.ios-glass-dark {
  background: rgba(30, 30, 30, 0.85);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
}

/* iOS 風格的卡片陰影 - 更精緻的多層陰影 */
.ios-card-shadow {
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.03),
    0 2px 8px rgba(0, 0, 0, 0.04),
    0 12px 24px rgba(0, 0, 0, 0.04);
}

.ios-card-shadow-elevated {
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.05),
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 20px 40px rgba(0, 0, 0, 0.08);
}

/* iOS 風格的按鈕陰影 */
.ios-button-shadow {
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    0 2px 4px rgba(0, 0, 0, 0.08);
}

.ios-button-shadow:active {
  box-shadow:
    0 0.5px 1px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.08);
}

/* iOS 風格的圓角系統 */
.ios-radius-sm { border-radius: 10px; }
.ios-radius-md { border-radius: 14px; }
.ios-radius-lg { border-radius: 18px; }
.ios-radius-xl { border-radius: 22px; }

/* iOS 風格的邊框 */
.ios-border-thin {
  border: 0.5px solid rgba(0, 0, 0, 0.08);
}

.ios-border-medium {
  border: 1px solid rgba(0, 0, 0, 0.1);
}

/* iOS 風格的分隔線 */
.ios-separator {
  height: 0.5px;
  background: linear-gradient(
    to right,
    transparent,
    rgba(0, 0, 0, 0.08) 20%,
    rgba(0, 0, 0, 0.08) 80%,
    transparent
  );
}

/* iOS 風格的切換開關動畫 */
@keyframes ios-switch-bounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.ios-switch-active {
  animation: ios-switch-bounce 0.3s ease;
}

/* iOS 風格的滑動進入動畫 */
@keyframes ios-slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes ios-slide-in-left {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes ios-slide-in-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes ios-slide-in-down {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.ios-slide-in-right { animation: ios-slide-in-right 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
.ios-slide-in-left { animation: ios-slide-in-left 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
.ios-slide-in-up { animation: ios-slide-in-up 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
.ios-slide-in-down { animation: ios-slide-in-down 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); }

/* iOS 風格的彈簧動畫 */
@keyframes ios-spring {
  0% { transform: scale(0.8); opacity: 0; }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); opacity: 1; }
}

.ios-spring { animation: ios-spring 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }

/* iOS 風格的漸層背景 */
.ios-gradient-primary {
  background: linear-gradient(135deg, #007AFF 0%, #5856D6 100%);
}

.ios-gradient-success {
  background: linear-gradient(135deg, #34C759 0%, #30B0C7 100%);
}

.ios-gradient-warning {
  background: linear-gradient(135deg, #FF9500 0%, #FF6B00 100%);
}

.ios-gradient-danger {
  background: linear-gradient(135deg, #FF3B30 0%, #FF453A 100%);
}

/* iOS 風格的脈衝動畫（用於通知等） */
@keyframes ios-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.02);
  }
}

.ios-pulse { animation: ios-pulse 2s ease-in-out infinite; }

/* iOS 風格的搖晃動畫（用於錯誤提示） */
@keyframes ios-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-8px); }
  40% { transform: translateX(8px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

.ios-shake { animation: ios-shake 0.5s ease; }

/* iOS 風格的旋轉加載動畫 */
@keyframes ios-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.ios-spin { animation: ios-spin 1s linear infinite; }

/* iOS 風格的點擊波紋效果 */
@keyframes ios-ripple {
  from {
    transform: scale(0);
    opacity: 0.5;
  }
  to {
    transform: scale(4);
    opacity: 0;
  }
}

.ios-ipple::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: currentColor;
  animation: ios-ripple 0.6s ease-out;
  pointer-events: none;
}

/* 改善滾動效能 */
.ios-smooth-scroll {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* iOS Safari 橡皮筋效果優化 */
.prevent-overscroll {
  overscroll-behavior: none;
}

/* 改善輸入框在 iOS 的外觀 */
input, textarea, select {
  -webkit-appearance: none;
  appearance: none;
  border-radius: 12px;
  font-size: 16px; /* 防止 iOS 自動縮放 */
}

/* iOS 選擇器優化 */
select {
  -webkit-appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 16px center;
  padding-right: 48px;
}

/* iOS Safari 底部工具欄優化 */
.ios-toolbar-safe {
  padding-bottom: max(env(safe-area-inset-bottom), 20px);
}

/* iOS Safari 彈性滾動 */
.ios-bounce-scroll {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
  overflow-x: hidden;
}

/* iOS Safari 固定定位優化 */
@supports (padding: max(0px)) {
  .ios-fixed-bottom {
    position: fixed;
    bottom: max(env(safe-area-inset-bottom), 20px);
    left: 0;
    right: 0;
  }
}

/* iOS Safari 文字選擇優化 */
::selection {
  background: rgba(59, 130, 246, 0.3);
  color: inherit;
}

/* iOS Safari 連結樣式優化 */
a {
  -webkit-tap-highlight-color: rgba(59, 130, 246, 0.2);
  text-decoration: none;
}

/* iOS Safari 滾動條隱藏 */
::-webkit-scrollbar {
  width: 0px;
  height: 0px;
  background: transparent;
}

/* iOS Safari 輸入框聚焦優化 */
input:focus, textarea:focus, select:focus {
  outline: none;
  -webkit-appearance: none;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
}

/* iOS Safari 按鈕點擊優化 */
button:active, .button-active {
  transform: scale(0.97);
  opacity: 0.9;
  transition: transform 0.1s, opacity 0.1s;
}

/* iOS Safari 平滑返回動畫 */
@supports (backdrop-filter: blur(10px)) {
  .ios-blur-backdrop {
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    background-color: rgba(255, 255, 255, 0.8);
  }
}

/* iOS Safari 安全區域內邊距 */
.ios-padding-safe {
  padding: max(env(safe-area-inset-top), 20px) max(env(safe-area-inset-right), 20px) max(env(safe-area-inset-bottom), 20px) max(env(safe-area-inset-left), 20px);
}

/* iOS Safari 全屏優化 */
.ios-fullscreen {
  width: 100vw;
  height: 100vh;
  height: -webkit-fill-available;
}

/* iOS Safari 禁止文字選取 */
.ios-no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* iOS Safari 可滾動容器優化 */
.ios-scroll-container {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

/* iOS Safari 輸入框自動縮放修復 */
input[type="text"], input[type="number"], input[type="email"], input[type="tel"], input[type="url"], textarea {
  font-size: 16px !important;
  /* iOS 輸入框文字清晰度優化 */
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

/* ========================================
   iOS 13+ 文字對比度與清晰度增強
   ======================================== */

/* 全局文字對比度優化 - 確保高可讀性 */
body {
  /* 提升文字對比度（WCAG AA 標準） */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* 防止次像素渲染問題 */
  -webkit-text-stroke: 0;
}

/* 所有文字元素的字體渲染優化 */
p, span, div, h1, h2, h3, h4, h5, h6, label, button, a {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
}

/* 深色模式下的文字清晰度優化 */
.dark body,
.dark p,
.dark span,
.dark div,
.dark h1,
.dark h2,
.dark h3,
.dark h4,
.dark h5,
.dark h6,
.dark label {
  /* 深色模式使用次像素反鋸齒以獲得更好的清晰度 */
  -webkit-font-smoothing: subpixel-antialiased;
  text-shadow: 0 0 1px rgba(255, 255, 255, 0.1);
}

/* 深色模式下的連結優化 */
.dark a {
  -webkit-font-smoothing: antialiased;
  text-shadow: 0 0 1px rgba(255, 255, 255, 0.15);
}

/* 淺色模式下的文字微調 */
body:not(.dark) p,
body:not(.dark) span,
body:not(.dark) div {
  /* 淺色模式使用更柔和的渲染 */
  text-shadow: 0 0 0.5px rgba(0, 0, 0, 0.05);
}

/* 確保高對比度文字在所有狀態下都清晰可見 */
@media (prefers-contrast: high) {
  body {
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  .text-easy-body,
  .text-easy-body-large {
    font-weight: 600; /* 提升字重以增加對比度 */
    letter-spacing: 0.02em;
  }
}

/* ========================================
   iPhone 13/14/15 Pro 系列 OLED 顯示優化
   ======================================== */

/* ProMotion 顯示屏優化 (120Hz) - iPhone 13 Pro 及以上 */
@media (update: fast) {
  /* 在 120Hz 顯示屏上使用更精細的字體渲染 */
  html {
    text-rendering: geometricPrecision;
    -webkit-font-smoothing: antialiased;
  }

  /* 提升文字清晰度 */
  .text-easy-title,
  .text-easy-heading {
    -webkit-font-smoothing: subpixel-antialiased;
    letter-spacing: -0.005em;
  }
}

/* OLED 顯示屏專用優化 (iPhone 13 Pro, 14 Pro, 15 Pro 系列) */
@media screen and (-webkit-min-device-pixel-ratio: 3) {
  /* OLED 屏幕深色模式文字優化 */
  .dark body,
  .dark p,
  .dark span,
  .dark div {
    /* OLED 屏幕使用純黑以獲得最佳對比度 */
    text-shadow: 0 0 0.5px rgba(255, 255, 255, 0.2);
    -webkit-font-smoothing: subpixel-antialiased;
  }

  /* OLED 屏幕淺色模式優化 */
  body:not(.dark) p,
  body:not(.dark) span,
  body:not(.dark) div {
    /* 減少淺色模式下的文字陰影，保持清晰 */
    text-shadow: 0 0 0.3px rgba(0, 0, 0, 0.03);
    -webkit-font-smoothing: antialiased;
  }

  /* 標題在 OLED 上的特殊優化 */
  .text-easy-title,
  .text-easy-heading {
    -webkit-font-smoothing: subpixel-antialiased;
    text-shadow: 0 0 1px currentColor;
  }
}

/* iPhone 13/14/15 標準版及 Plus 型號 (LCD/OLED 混合) */
@media screen and (-webkit-min-device-pixel-ratio: 3) and (max-device-width: 430px) {
  html {
    font-size: 18.5px; /* 稍大的基礎字體 */
  }

  body[lang*="zh"] {
    letter-spacing: 0.025em; /* 中文字距微調 */
    line-height: 1.72;
  }
}

/* ========================================
   基礎樣式覆寫
   ======================================== */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
    /* 防止 iOS 橡皮筋效果 */
    overscroll-behavior-y: none;
    /* 改善滾動 */
    -webkit-overflow-scrolling: touch;
  }

  /* 改善所有可聚焦元素的樣式 */
  *:focus-visible {
    outline: 3px solid oklch(0.55 0.22 250);
    outline-offset: 2px;
  }

  /* 按鈕基礎樣式 */
  button {
    cursor: pointer;
    font-family: inherit;
  }

  /* 連結樣式 */
  a {
    color: oklch(0.55 0.22 250);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  a:hover {
    color: oklch(0.45 0.22 250);
  }
}

/* ========================================
   響應式工具類
   ======================================== */

/* 針對小屏幕的優化 */
@media (max-width: 640px) {
  .responsive-padding {
    padding-left: 16px;
    padding-right: 16px;
  }

  .responsive-gap {
    gap: 12px;
  }

  .responsive-text {
    font-size: 1rem;
  }
}

/* 針對大屏幕的優化 */
@media (min-width: 768px) {
  .responsive-padding {
    padding-left: 24px;
    padding-right: 24px;
  }

  .responsive-gap {
    gap: 20px;
  }
}

/* ========================================
   動畫效果 - 柔和流暢
   ======================================== */
@keyframes gentle-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-gentle-fade-in {
  animation: gentle-fade-in 0.3s ease-out;
}

/* 按鈕點擊反饋 */
@keyframes button-press {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.96);
  }
  100% {
    transform: scale(1);
  }
}

.button-press {
  animation: button-press 0.2s ease;
}

/* ========================================
   可訪問性增強
   ======================================== */

/* 高對比度模式支援 */
@media (prefers-contrast: high) {
  :root {
    --border: oklch(0.70 0 0);
    --ring: oklch(0.55 0.22 250);
  }

  .button-easy-touch {
    border-width: 2px;
  }
}

/* 減少動畫偏好 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* 深色模式切換動畫 */
.theme-transition {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* ========================================
   iOS 狀態欄優化
   ======================================== */
@supports (padding: max(0px)) {
  .status-bar-safe {
    padding-top: max(env(safe-area-inset-top), 20px);
  }
}

/* ========================================
   鍵盤彈出時的優化（iOS Safari）
   ======================================== */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .keyboard-safe {
    padding-bottom: max(env(safe-area-inset-bottom), 20px);
  }
}

/* ========================================
   列表和表格優化
   ======================================== */
.table-easy-read {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

.table-easy-read th,
.table-easy-read td {
  padding: 16px;
  text-align: left;
  border-bottom: 1px solid oklch(0.88 0 0);
}

.table-easy-read th {
  font-size: 1rem;
  font-weight: 700;
  background-color: oklch(0.96 0 0);
}

.table-easy-read td {
  font-size: 1rem;
  font-weight: 500;
}

.table-easy-read tr:hover td {
  background-color: oklch(0.97 0 0);
}

/* ========================================
   iOS 18 風格增強動畫
   ======================================== */

/* 頁面推入動畫（從右側推入） */
@keyframes ios-page-push-in {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* 頁面推出動畫（向左側推出） */
@keyframes ios-page-push-out {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(-30%);
    opacity: 0;
  }
}

/* iOS 彈性縮放動畫 */
@keyframes ios-bounce-scale {
  0% {
    transform: scale(1);
  }
  30% {
    transform: scale(1.05);
  }
  50% {
    transform: scale(0.95);
  }
  70% {
    transform: scale(1.02);
  }
  100% {
    transform: scale(1);
  }
}

/* iOS 漣漪擴散動畫 */
@keyframes ios-ripple-expand {
  from {
    transform: scale(0);
    opacity: 0.6;
  }
  to {
    transform: scale(4);
    opacity: 0;
  }
}

/* iOS 旋轉進入動畫 */
@keyframes ios-rotate-in {
  from {
    transform: rotate(-180deg) scale(0);
    opacity: 0;
  }
  to {
    transform: rotate(0) scale(1);
    opacity: 1;
  }
}

/* iOS 滑動淡入動畫（從底部） */
@keyframes ios-slide-fade-up {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* iOS 脈衝光暈動畫 */
@keyframes ios-pulse-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4);
  }
  50% {
    box-shadow: 0 0 0 10px rgba(37, 99, 235, 0);
  }
}

/* iOS 閃爍提示動畫 */
@keyframes ios-blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
}

/* iOS 搖擺提醒動畫 */
@keyframes ios-wiggle {
  0%, 100% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(-3deg);
  }
  75% {
    transform: rotate(3deg);
  }
}

/* iOS 加載骨架屏閃爍 */
@keyframes ios-skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* iOS 進度條動畫 */
@keyframes ios-progress-bar {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* iOS 圓形進度動畫 */
@keyframes ios-circular-progress {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* 動畫工具類 */
.ios-page-push-in { animation: ios-page-push-in 0.4s cubic-bezier(0.32, 0.72, 0, 1); }
.ios-page-push-out { animation: ios-page-push-out 0.3s cubic-bezier(0.32, 0.72, 0, 1); }
.ios-bounce-scale { animation: ios-bounce-scale 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
.ios-ripple-expand { animation: ios-ripple-expand 0.6s ease-out; }
.ios-rotate-in { animation: ios-rotate-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
.ios-slide-fade-up { animation: ios-slide-fade-up 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
.ios-pulse-glow { animation: ios-pulse-glow 2s ease-in-out infinite; }
.ios-blink { animation: ios-blink 1s ease-in-out infinite; }
.ios-wiggle { animation: ios-wiggle 0.5s ease-in-out infinite; }
.ios-circular-progress { animation: ios-circular-progress 1s linear infinite; }

/* 延遲工具類 */
.delay-75 { animation-delay: 75ms; }
.delay-100 { animation-delay: 100ms; }
.delay-150 { animation-delay: 150ms; }
.delay-200 { animation-delay: 200ms; }
.delay-300 { animation-delay: 300ms; }
.delay-500 { animation-delay: 500ms; }

/* 交錯動畫工具類 */
.stagger-1 { animation-delay: 50ms; }
.stagger-2 { animation-delay: 100ms; }
.stagger-3 { animation-delay: 150ms; }
.stagger-4 { animation-delay: 200ms; }
.stagger-5 { animation-delay: 250ms; }
.stagger-6 { animation-delay: 300ms; }

/* ========================================
   iOS 18 風格卡片和陰影增強
   ======================================== */

/* iOS 18 風格卡片 - 更精緻的陰影 */
.ios-card-18 {
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.04),
    0 2px 8px rgba(0, 0, 0, 0.04),
    0 16px 32px rgba(0, 0, 0, 0.04);
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.ios-card-18:hover {
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.06),
    0 4px 12px rgba(0, 0, 0, 0.06),
    0 20px 40px rgba(0, 0, 0, 0.06);
  transform: translateY(-2px);
}

/* iOS 18 風格按鈕 - 3D 效果 */
.ios-button-3d {
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    0 2px 4px rgba(0, 0, 0, 0.08),
    inset 0 -2px 4px rgba(0, 0, 0, 0.08);
  transition: all 0.15s ease;
}

.ios-button-3d:active {
  box-shadow:
    0 0.5px 1px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(0, 0, 0, 0.08),
    inset 0 -1px 2px rgba(0, 0, 0, 0.08);
  transform: translateY(1px);
}

/* iOS 18 風格毛玻璃 - 更通透 */
.ios-glass-18 {
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(24px) saturate(180%) brightness(1.1);
  -webkit-backdrop-filter: blur(24px) saturate(180%) brightness(1.1);
}

.dark .ios-glass-18 {
  background: rgba(30, 30, 30, 0.75);
  backdrop-filter: blur(24px) saturate(180%) brightness(1.2);
  -webkit-backdrop-filter: blur(24px) saturate(180%) brightness(1.2);
}

/* ========================================
   iOS 18 手勢相關樣式
   ======================================== */

/* 長按激活狀態 */
.ios-long-press {
  transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.ios-long-press:active,
.ios-long-press.active {
  transform: scale(0.95);
  opacity: 0.8;
}

/* 滑動刪除預覽 */
.ios-swipe-preview {
  transform: translateX(0);
  transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.ios-swipe-preview.swiping {
  transform: translateX(-80px);
}

/* ========================================
   iOS 18 狀態指示器
   ======================================== */

/* 骨架屏加載狀態 */
.ios-skeleton {
  background: linear-gradient(
    90deg,
    oklch(0.94 0 0) 0%,
    oklch(0.97 0 0) 50%,
    oklch(0.94 0 0) 100%
  );
  background-size: 200% 100%;
  animation: ios-skeleton-shimmer 1.5s ease-in-out infinite;
  border-radius: 8px;
}

.dark .ios-skeleton {
  background: linear-gradient(
    90deg,
    oklch(0.25 0 0) 0%,
    oklch(0.30 0 0) 50%,
    oklch(0.25 0 0) 100%
  );
  background-size: 200% 100%;
}

/* 進度條 */
.ios-progress-bar {
  position: relative;
  height: 4px;
  background: oklch(0.92 0 0);
  border-radius: 2px;
  overflow: hidden;
}

.dark .ios-progress-bar {
  background: oklch(0.25 0 0);
}

.ios-progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, oklch(0.57 0.24 250), oklch(0.55 0.22 280));
  border-radius: 2px;
  transition: width 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.ios-progress-bar-animated .ios-progress-bar-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.3),
    transparent
  );
  animation: ios-progress-bar 1.5s ease-in-out infinite;
}

/* 圓形進度指示器 */
.ios-circular-progress {
  position: relative;
  width: 24px;
  height: 24px;
}

.ios-circular-progress svg {
  transform: rotate(-90deg);
}

.ios-circular-progress circle {
  fill: none;
  stroke-width: 3;
  stroke-linecap: round;
}

.ios-circular-progress-bg {
  stroke: oklch(0.90 0 0);
}

.dark .ios-circular-progress-bg {
  stroke: oklch(0.25 0 0);
}

.ios-circular-progress-fill {
  stroke: oklch(0.57 0.24 250);
  transition: stroke-dashoffset 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* ========================================
   iOS 18 反饋動畫
   ======================================== */

/* 成功反饋 */
@keyframes ios-success-check {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.ios-success-animate {
  animation: ios-success-check 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* 錯誤搖晃 */
@keyframes ios-error-shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.ios-error-animate {
  animation: ios-error-shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97);
}

/* 警告脈衝 */
@keyframes ios-warning-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

.ios-warning-animate {
  animation: ios-warning-pulse 1s ease-in-out 3;
}

/* ========================================
   iOS 18 新增高級動畫效果
   ======================================== */

/* iOS 18 彈簧放大動畫（更自然的彈性） */
@keyframes ios-spring-scale-up {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.08);
  }
  70% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.ios-spring-scale-up {
  animation: ios-spring-scale-up 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* iOS 18 彈性滑入動畫 */
@keyframes ios-spring-slide-in {
  0% {
    transform: translateY(100px);
    opacity: 0;
  }
  60% {
    transform: translateY(-10px);
    opacity: 1;
  }
  80% {
    transform: translateY(5px);
  }
  100% {
    transform: translateY(0);
  }
}

.ios-spring-slide-in {
  animation: ios-spring-slide-in 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* iOS 18 3D翻轉動畫 */
@keyframes ios-flip-in {
  0% {
    transform: perspective(1000px) rotateY(-90deg);
    opacity: 0;
  }
  100% {
    transform: perspective(1000px) rotateY(0);
    opacity: 1;
  }
}

.ios-flip-in {
  animation: ios-flip-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* iOS 18 縮放淡入動畫 */
@keyframes ios-zoom-fade-in {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.ios-zoom-fade-in {
  animation: ios-zoom-fade-in 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

/* iOS 18 彈跳進入動畫 */
@keyframes ios-bounce-in {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.15);
  }
  70% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.ios-bounce-in {
  animation: ios-bounce-in 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* iOS 18 滑動彈出動畫 */
@keyframes ios-slide-pop {
  0% {
    transform: translateX(-100%) scale(0.8);
    opacity: 0;
  }
  60% {
    transform: translateX(10%) scale(1.05);
    opacity: 1;
  }
  100% {
    transform: translateX(0) scale(1);
  }
}

.ios-slide-pop {
  animation: ios-slide-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* iOS 18 漣漪反饋動畫（更精緻） */
@keyframes ios-ripple-refined {
  0% {
    transform: scale(0);
    opacity: 0.6;
  }
  50% {
    opacity: 0.3;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

.ios-ripple-refined::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(circle, currentColor 0%, transparent 70%);
  animation: ios-ripple-refined 0.8s ease-out;
  pointer-events: none;
}

/* iOS 18 光澃掃過動畫 */
@keyframes ios-shine-sweep {
  0% {
    transform: translateX(-100%) skewX(-15deg);
  }
  100% {
    transform: translateX(200%) skewX(-15deg);
  }
}

.ios-shine-sweep {
  position: relative;
  overflow: hidden;
}

.ios-shine-sweep::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.4),
    transparent
  );
  animation: ios-shine-sweep 2s ease-in-out infinite;
}

/* iOS 18 脈衝波紋動畫 */
@keyframes ios-pulse-ring {
  0% {
    transform: scale(1);
    opacity: 0.8;
  }
  100% {
    transform: scale(1.5);
    opacity: 0;
  }
}

.ios-pulse-ring::before {
  content: '';
  position: absolute;
  inset: -4px;
  border-radius: inherit;
  border: 2px solid currentColor;
  animation: ios-pulse-ring 1.5s ease-out infinite;
}

/* iOS 18 漂浮動畫 */
@keyframes ios-float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.ios-float {
  animation: ios-float 3s ease-in-out infinite;
}

/* iOS 18 呼吸動畫 */
@keyframes ios-breathe {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

.ios-breathe {
  animation: ios-breathe 2s ease-in-out infinite;
}

/* iOS 18 旋轉滑入動畫 */
@keyframes ios-rotate-slide-in {
  0% {
    transform: rotate(-15deg) translateX(-50px);
    opacity: 0;
  }
  100% {
    transform: rotate(0) translateX(0);
    opacity: 1;
  }
}

.ios-rotate-slide-in {
  animation: ios-rotate-slide-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* iOS 18 交錯淡入動畫 */
@keyframes ios-stagger-fade-in {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.ios-stagger-fade-in {
  animation: ios-stagger-fade-in 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

/* iOS 18 彈性退出動畫 */
@keyframes ios-bounce-out {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  30% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

.ios-bounce-out {
  animation: ios-bounce-out 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* iOS 18 滑動淡出動畫 */
@keyframes ios-slide-fade-out {
  0% {
    transform: translateY(0);
    opacity: 1;
  }
  100% {
    transform: translateY(-20px);
    opacity: 0;
  }
}

.ios-slide-fade-out {
  animation: ios-slide-fade-out 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* iOS 18 縮放退出動畫 */
@keyframes ios-zoom-out {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(0.5);
    opacity: 0;
  }
}

.ios-zoom-out {
  animation: ios-zoom-out 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* iOS 18 按壓深層動畫 */
@keyframes ios-press-deep {
  0% {
    transform: scale(1) translateY(0);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  }
  100% {
    transform: scale(0.95) translateY(2px);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }
}

.ios-press-deep {
  animation: ios-press-deep 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

/* iOS 18 釋放回彈動畫 */
@keyframes ios-release-bounce {
  0% {
    transform: scale(0.95) translateY(2px);
  }
  50% {
    transform: scale(1.02) translateY(-1px);
  }
  100% {
    transform: scale(1) translateY(0);
  }
}

.ios-release-bounce {
  animation: ios-release-bounce 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* iOS 18 文字打字機效果 */
@keyframes ios-typewriter {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

.ios-typewriter {
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid currentColor;
  animation: ios-typewriter 2s steps(40) 1s forwards,
             ios-blink 0.75s step-end infinite;
}

/* iOS 18 閃爍光標 */
@keyframes ios-blink-cursor {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

.ios-blink-cursor {
  animation: ios-blink-cursor 1s step-end infinite;
}

/* iOS 18 載入條紋動畫 */
@keyframes ios-loading-stripe {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 50px 50px;
  }
}

.ios-loading-stripe {
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 10px,
    rgba(255, 255, 255, 0.1) 10px,
    rgba(255, 255, 255, 0.1) 20px
  );
  animation: ios-loading-stripe 1s linear infinite;
}

/* iOS 18 彈性高度動畫 */
@keyframes ios-spring-height {
  0% {
    max-height: 0;
    opacity: 0;
  }
  100% {
    max-height: 500px;
    opacity: 1;
  }
}

.ios-spring-height {
  animation: ios-spring-height 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* iOS 18 漸變切換動畫 */
@keyframes ios-gradient-shift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.ios-gradient-shift {
  background-size: 200% 200%;
  animation: ios-gradient-shift 3s ease infinite;
}

/* ========================================
   iOS 18 觸控反饋增強
   ======================================== */

/* 觸控反饋 - 輕微縮放 */
.ios-touch-feedback-scale {
  transition: transform 0.15s cubic-bezier(0.16, 1, 0.3, 1);
}

.ios-touch-feedback-scale:active {
  transform: scale(0.95);
}

/* 觸控反饋 - 深度壓下 */
.ios-touch-feedback-deep {
  transition: all 0.15s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.ios-touch-feedback-deep:active {
  transform: translateY(2px) scale(0.98);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
}

/* 觸控反饋 - 高亮效果 */
.ios-touch-feedback-highlight {
  position: relative;
  overflow: hidden;
}

.ios-touch-feedback-highlight::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at var(--touch-x, 50%) var(--touch-y, 50%),
    rgba(255, 255, 255, 0.5) 0%,
    transparent 60%
  );
  opacity: 0;
  transition: opacity 0.3s;
}

.ios-touch-feedback-highlight:active::after {
  opacity: 1;
}

/* ========================================
   iOS 18 狀態過渡動畫
   ======================================== */

/* 平滑顏色過渡 */
.ios-transition-colors {
  transition: color 0.3s ease, background-color 0.3s ease, border-color 0.3s ease;
}

/* 平滑變換過渡 */
.ios-transition-transform {
  transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

/* 平滑陰影過渡 */
.ios-transition-shadow {
  transition: box-shadow 0.3s ease;
}

/* 平滑透明度過渡 */
.ios-transition-opacity {
  transition: opacity 0.3s ease;
}

/* 組合平滑過渡 */
.ios-transition-smooth {
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

/* ========================================
   iOS 18 進階視覺效果
   ======================================== */

/* 磨砂玻璃增強版 */
.ios-glass-ultra {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(40px) saturate(200%) brightness(1.05);
  -webkit-backdrop-filter: blur(40px) saturate(200%) brightness(1.05);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.5) inset,
    0 20px 40px rgba(0, 0, 0, 0.1);
}

.dark .ios-glass-ultra {
  background: rgba(30, 30, 30, 0.85);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.1) inset,
    0 20px 40px rgba(0, 0, 0, 0.3);
}

/* 新擬態風格（Neumorphism） */
.ios-neumorphism {
  background: oklch(0.97 0 0);
  box-shadow:
    8px 8px 16px rgba(0, 0, 0, 0.08),
    -8px -8px 16px rgba(255, 255, 255, 0.8);
}

.dark .ios-neumorphism {
  background: oklch(0.20 0 0);
  box-shadow:
    8px 8px 16px rgba(0, 0, 0, 0.4),
    -8px -8px 16px rgba(255, 255, 255, 0.05);
}

/* 按壓新擬態效果 */
.ios-neumorphism-pressed {
  box-shadow:
    inset 4px 4px 8px rgba(0, 0, 0, 0.08),
    inset -4px -4px 8px rgba(255, 255, 255, 0.8);
}

.dark .ios-neumorphism-pressed {
  box-shadow:
    inset 4px 4px 8px rgba(0, 0, 0, 0.4),
    inset -4px -4px 8px rgba(255, 255, 255, 0.05);
}

/* 立體按鈕效果 */
.ios-button-3d-enhanced {
  position: relative;
  transform-style: preserve-3d;
  transition: all 0.15s cubic-bezier(0.16, 1, 0.3, 1);
}

.ios-button-3d-enhanced::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: inherit;
  transform: translateZ(-10px) translateY(8px);
  filter: brightness(0.9);
  transition: all 0.15s cubic-bezier(0.16, 1, 0.3, 1);
}

.ios-button-3d-enhanced:active {
  transform: translateY(4px);
}

.ios-button-3d-enhanced:active::before {
  transform: translateZ(-10px) translateY(4px);
}

/* ========================================
   iOS 18 微交互效果
   ======================================== */

/* 懸浮提示動畫 */
.ios-tooltip-pop {
  animation: ios-tooltip-pop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes ios-tooltip-pop {
  0% {
    transform: scale(0.5) translateY(10px);
    opacity: 0;
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

/* 複製成功動畫 */
.ios-copy-success {
  animation: ios-copy-success 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes ios-copy-success {
  0% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.2);
  }
  50% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
  }
}

/* 刪除搖晃動畫 */
.ios-delete-shake {
  animation: ios-delete-shake 0.5s ease-in-out;
}

@keyframes ios-delete-shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

/* 新增飛入動畫 */
.ios-add-fly-in {
  animation: ios-add-fly-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes ios-add-fly-in {
  0% {
    transform: scale(0) rotate(-180deg);
    opacity: 0;
  }
  100% {
    transform: scale(1) rotate(0);
    opacity: 1;
  }
}

/* ========================================
   iOS 18 滾動增強
   ======================================== */

/* 平滑滾動行為 */
.ios-scroll-smooth {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* 滾動捕獲 */
.ios-scroll-snap-x {
  scroll-snap-type: x mandatory;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.ios-scroll-snap-y {
  scroll-snap-type: y mandatory;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.ios-scroll-snap-center {
  scroll-snap-align: center;
}

.ios-scroll-snap-start {
  scroll-snap-align: start;
}

.ios-scroll-snap-end {
  scroll-snap-align: end;
}

/* 滾動指示器 */
.ios-scroll-indicator {
  position: relative;
}

.ios-scroll-indicator::after {
  content: '';
  position: absolute;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 4px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  animation: ios-scroll-indicator-pulse 2s ease-in-out infinite;
}

.dark .ios-scroll-indicator::after {
  background: rgba(255, 255, 255, 0.3);
}

@keyframes ios-scroll-indicator-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
